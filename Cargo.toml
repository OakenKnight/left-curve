[workspace]
resolver = "2"
members  = [
  "bin",
  "contracts/account/factory",
  "contracts/account/safe",
  "contracts/account/spot",
  "contracts/amm",
  "contracts/bank",
  "contracts/ibc-transfer",
  "contracts/mocks/account",
  "contracts/mocks/bank",
  "contracts/mocks/taxman",
  "contracts/taxman",
  "contracts/tester",
  "contracts/token-factory",
  "crates/app",
  "crates/auth",
  "crates/client",
  "crates/crypto",
  "crates/dango",
  "crates/db/disk",
  "crates/db/memory",
  "crates/ffi",
  "crates/genesis",
  "crates/jellyfish-merkle",
  "crates/macros",
  "crates/math",
  "crates/std",
  "crates/storage",
  "crates/testing",
  "crates/types",
  "crates/vm/rust",
  "crates/vm/wasm",
  "e2e",
]

[workspace.package]
version       = "0.0.0"
authors       = ["Left Curve Software Limited (https://leftcurve.software/)"]
edition       = "2021"
rust-version  = "1.80"
documentation = "https://leftcurve.software/grug"
repository    = "https://github.com/left-curve/grug"
license       = "TBD"
keywords      = ["blockchain", "wasm"]
categories    = ["cryptography::cryptocurrencies"]

[workspace.dependencies]
anyhow             = "1"
base64             = "0.22" # TODO: used in dango-auth; replace with data-encoding
blake2             = "0.10"
blake3             = "1"
bnum               = "0.12"
borsh              = "1"
chrono             = "0.4"
clap               = "4"
clru               = "0.6"
colored            = "2"
colored_json       = "5"
criterion          = "0.5"
data-encoding      = "2"
dialoguer          = "0.11"
digest             = "0.10"
dyn-clone          = "1"
ed25519-dalek      = "2"
elsa               = "1"
hex                = "0.4"
hex-literal        = "0.4"
home               = "0.5"
ics23              = "0.12"
k256               = "0.13"
paste              = "1"
p256               = "0.13"
proc-macro2        = "1"
proptest           = "1"
prost              = "0.13"
quote              = "1"
rand               = "0.8"
ripemd             = "0.1"
# Use the latest `master` branch of rust-rocksdb, which includes support for
# the user-defined timestamp feature:
# https://github.com/facebook/rocksdb/wiki/User-defined-Timestamp
#
# TODO: Update to v0.23.0 once released.
rocksdb            = { git = "https://github.com/rust-rocksdb/rust-rocksdb", rev = "1710120" }
serde              = "1"
serde_json         = "1"
serde_with         = "3"
sha2               = "0.10"
sha3               = "0.10"
signature          = "2"
syn                = "2"
tempfile           = "3"
tendermint         = "0.39"
tendermint-abci    = "0.39"
tendermint-proto   = "0.39"
tendermint-rpc     = "0.39"
test-case          = "3"
thiserror          = "1"
tokio              = "1"
tracing            = "0.1"
tracing-subscriber = "0.3"
wasmer             = "4"
wasmer-middlewares = "4"

# Grug packages
grug              = { path = "crates/std" }
grug-app          = { path = "crates/app" }
grug-auth         = { path = "crates/auth" }
grug-client       = { path = "crates/client" }
grug-crypto       = { path = "crates/crypto" }
grug-db-disk      = { path = "crates/db/disk" }
grug-db-memory    = { path = "crates/db/memory" }
grug-ffi          = { path = "crates/ffi" }
grug-jmt          = { path = "crates/jellyfish-merkle" }
grug-macros       = { path = "crates/macros" }
grug-math         = { path = "crates/math" }
grug-mock-account = { path = "contracts/mocks/account" }
grug-mock-bank    = { path = "contracts/mocks/bank" }
grug-mock-taxman  = { path = "contracts/mocks/taxman" }
grug-storage      = { path = "crates/storage" }
grug-tester       = { path = "contracts/tester" }
grug-testing      = { path = "crates/testing" }
grug-types        = { path = "crates/types" }
grug-vm-rust      = { path = "crates/vm/rust" }
grug-vm-wasm      = { path = "crates/vm/wasm" }

# Dango packages
dango-account-factory = { path = "contracts/account/factory" }
dango-account-safe    = { path = "contracts/account/safe" }
dango-account-spot    = { path = "contracts/account/spot" }
dango-amm             = { path = "contracts/amm" }
dango-auth            = { path = "crates/auth" }
dango-bank            = { path = "contracts/bank" }
dango-genesis         = { path = "crates/genesis" }
dango-ibc-transfer    = { path = "contracts/ibc-transfer" }
dango-taxman          = { path = "contracts/taxman" }
dango-token-factory   = { path = "contracts/token-factory" }
dango-types           = { path = "crates/dango" }

[profile.release]
codegen-units    = 1
debug            = false
debug-assertions = false
incremental      = false
lto              = true
overflow-checks  = true
opt-level        = 3
panic            = "abort"
rpath            = false
